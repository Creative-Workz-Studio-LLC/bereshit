////
#!omni document --adoc
===============================================================================
METADATA BLOCK
===============================================================================
////

// -----------------------------------------------------------------------------
// IDENTITY
// -----------------------------------------------------------------------------
:key: B-word-research-ternary-arithmetic-algorithms
:title: Ternary Arithmetic Algorithms: Addition, Subtraction, Multiplication, Division
:type: Research

// -----------------------------------------------------------------------------
// STATE
// -----------------------------------------------------------------------------
:status: Active
:version: a-01.00
:revdate: 2025-12-12

// -----------------------------------------------------------------------------
// TEMPORAL
// -----------------------------------------------------------------------------
:created: 2025-12-12
:updated: 2025-12-12

// -----------------------------------------------------------------------------
// ATTRIBUTION
// -----------------------------------------------------------------------------
:authors: Nova Dawn (Researcher), Seanje Lenox-Wise (Architect)
:author: Nova Dawn
:email: nova@creativeworkzstudio.com

// -----------------------------------------------------------------------------
// LOCATION
// -----------------------------------------------------------------------------
:path: /bereshit/word/research/

// -----------------------------------------------------------------------------
// DERIVATION
// -----------------------------------------------------------------------------
:derives_from: bereshit/word/seed/documentation/adoc/asciidoc-research.adoc

// -----------------------------------------------------------------------------
// CLASSIFICATION
// -----------------------------------------------------------------------------
:tags: ternary, arithmetic, algorithms, addition, subtraction, multiplication, division, carry
:keywords: Ternary Arithmetic, Balanced Ternary Addition, Carry Propagation, Trit Operations, Multi-Trit Arithmetic

// -----------------------------------------------------------------------------
// INTENT
// -----------------------------------------------------------------------------
:purpose: Define the complete algorithms for arithmetic operations in balanced ternary
:description: Research document defining addition with carries, subtraction via negation, multiplication tables and multi-trit algorithms, and division with remainder handling

// -----------------------------------------------------------------------------
// GROUNDING
// -----------------------------------------------------------------------------
:biblical_foundation: Genesis 1:4 KJV/WEB ‚Äî God divided the light from the darkness

// -----------------------------------------------------------------------------
// STRICTNESS
// -----------------------------------------------------------------------------
:strictness: G

// -----------------------------------------------------------------------------
// ASCIIDOC SETTINGS
// -----------------------------------------------------------------------------
:toc: left
:toclevels: 3
:sectnums:
:icons: font
:source-highlighter: highlight.js
:experimental:

////
===============================================================================
END METADATA
===============================================================================
////

////
===============================================================================
HEADER BLOCK
===============================================================================
////

[[_top]]
= {title}

[.text-center]
--
*Complete algorithms for performing arithmetic in balanced ternary*

image:https://img.shields.io/badge/Status-{status}-brightgreen?style=flat[Status]
image:https://img.shields.io/badge/Version-{version}-blue?style=flat[Version]
image:https://img.shields.io/badge/Type-{type}-purple?style=flat[Type]

_"And God divided the light from the darkness."_ ‚Äî Genesis 1:4

'''

*<<overview,Overview>>* ‚Ä¢ *<<addition,Addition>>* ‚Ä¢ *<<subtraction,Subtraction>>* ‚Ä¢ *<<multiplication,Multiplication>>* ‚Ä¢ *<<division,Division>>* ‚Ä¢ *<<derived-constants,Constants>>*

--

'''

////
===============================================================================
CONTEXT BLOCK
===============================================================================
////

[[overview]]
== Overview

This document defines the *algorithms* for performing arithmetic in balanced ternary. While link:ternary-mathematical-foundations.adoc[Ternary Mathematical Foundations] proves *why* ternary is optimal, this document specifies *how* to compute.

[IMPORTANT]
====
*Balanced ternary arithmetic is simpler than binary.* The multiplication table has no carries. The addition table has only 2 carries out of 9 entries (vs 3 in unbalanced ternary). Negation is trivial: flip all signs.
====

[NOTE]
====
*Scope:*

* **IN:** Addition with carries, subtraction via negation, multiplication tables and algorithms, division with remainder
* **OUT:** Base conversion (Paper 4), storage/packing (Paper 5), logic operations (Paper 3)
====

'''

[[notation]]
=== Notation

Throughout this document:

[cols="^1,3,4",options="header"]
|===
| Symbol | Name | Meaning

| *T* or *-*
| Negative
| The value -1

| *0*
| Zero
| The value 0

| *1* or *+*
| Positive
| The value +1

| *c*
| Carry
| Carry digit for next position

| *s*
| Sum
| Result digit for current position
|===

'''

<<_top,‚Üë Back to Top>>

'''

////
===============================================================================
CONTENT BLOCK
===============================================================================
////

[[addition]]
== Addition

=== Single-Trit Addition (Half Adder)

The half adderfootnote:[Half Adder: Adds two single trits, producing sum and carry] computes the sum of two trits without an incoming carry.

[cols="^1,^1,^1,^1",options="header"]
|===
| a | b | carry | sum

| T | T | T | 1
| T | 0 | 0 | T
| T | 1 | 0 | 0
| 0 | T | 0 | T
| 0 | 0 | 0 | 0
| 0 | 1 | 0 | 1
| 1 | T | 0 | 0
| 1 | 0 | 0 | 1
| 1 | 1 | 1 | T
|===

[NOTE]
====
*Only 2 entries produce carries:* T+T and 1+1. This is far fewer than unbalanced ternary (3 carries) or decimal (45 carries out of 100).
====

=== Full Adder (With Carry In)

The full adderfootnote:[Full Adder: Adds two trits plus an incoming carry] handles the carry from the previous position. There are 3¬≥ = 27 possible input combinations:

[%collapsible%open]
.Complete Full Adder Table
====
[cols="^1,^1,^1,^1,^1",options="header"]
|===
| a | b | c_in | c_out | sum

| T | T | T | T | 0
| T | T | 0 | T | 1
| T | T | 1 | 0 | T
| T | 0 | T | T | 1
| T | 0 | 0 | 0 | T
| T | 0 | 1 | 0 | 0
| T | 1 | T | 0 | T
| T | 1 | 0 | 0 | 0
| T | 1 | 1 | 0 | 1
| 0 | T | T | T | 1
| 0 | T | 0 | 0 | T
| 0 | T | 1 | 0 | 0
| 0 | 0 | T | 0 | T
| 0 | 0 | 0 | 0 | 0
| 0 | 0 | 1 | 0 | 1
| 0 | 1 | T | 0 | 0
| 0 | 1 | 0 | 0 | 1
| 0 | 1 | 1 | 1 | T
| 1 | T | T | 0 | T
| 1 | T | 0 | 0 | 0
| 1 | T | 1 | 0 | 1
| 1 | 0 | T | 0 | 0
| 1 | 0 | 0 | 0 | 1
| 1 | 0 | 1 | 1 | T
| 1 | 1 | T | 0 | 1
| 1 | 1 | 0 | 1 | T
| 1 | 1 | 1 | 1 | 0
|===
====

=== Multi-Trit Addition Algorithm

[source,pseudocode]
----
function ADD(a[], b[], n):
    carry = 0
    result = new array[n+1]

    for i = 0 to n-1:
        s = a[i] + b[i] + carry

        if s >= 2:
            result[i] = s - 3    // -1 or 0
            carry = 1
        else if s <= -2:
            result[i] = s + 3    // 0 or 1
            carry = -1
        else:
            result[i] = s        // -1, 0, or 1
            carry = 0

    result[n] = carry
    return result
----

=== Example: 5 + 7 = 12

[source]
----
5 in balanced ternary:  1 T T  (1√ó9 - 1√ó3 - 1√ó1 = 9-3-1 = 5)
7 in balanced ternary:  1 T 1  (1√ó9 - 1√ó3 + 1√ó1 = 9-3+1 = 7)

Position 0: T + 1 = 0, carry = 0
Position 1: T + T = 1T (sum = T, carry = T)
Position 2: 1 + 1 + T = 1

Result: 1 1 0  (1√ó9 + 1√ó3 + 0√ó1 = 12) ‚úì
----

<<_top,‚Üë Back to Top>>

'''

[[subtraction]]
== Subtraction

=== The Elegant Solution

[IMPORTANT]
====
*Subtraction is addition of the negative.* And negation in balanced ternary is trivial: flip every trit's sign.
====

=== Negation

[cols="^2,^2",options="header"]
|===
| Input | Output

| T (-1) | 1 (+1)
| 0 | 0
| 1 (+1) | T (-1)
|===

=== Subtraction Algorithm

[source,pseudocode]
----
function SUBTRACT(a[], b[], n):
    neg_b = NEGATE(b)
    return ADD(a, neg_b, n)

function NEGATE(x[], n):
    result = new array[n]
    for i = 0 to n-1:
        result[i] = -x[i]    // T‚Üî1, 0‚Üî0
    return result
----

=== Example: 12 - 5 = 7

[source]
----
12 in balanced ternary: 1 1 0
5 in balanced ternary:  1 T T

Negate 5: T 1 1

Add 12 + (-5):
Position 0: 0 + 1 = 1, carry = 0
Position 1: 1 + 1 = T, carry = 1
Position 2: 1 + T + 1 = 1

Result: 1 T 1 (1√ó9 - 1√ó3 + 1√ó1 = 7) ‚úì
----

<<_top,‚Üë Back to Top>>

'''

[[multiplication]]
== Multiplication

=== Single-Trit Multiplication Table

[cols="^2,^1,^1,^1",options="header"]
|===
| √ó | T | 0 | 1

| *T*
| 1
| 0
| T

| *0*
| 0
| 0
| 0

| *1*
| T
| 0
| 1
|===

[TIP]
====
*The multiplication table has NO carries.* Every single-trit multiplication produces a single-trit result. This is unique to balanced ternary.
====

=== Multi-Trit Multiplication Algorithm

Standard long multiplication, but simpler due to no-carry property:

[source,pseudocode]
----
function MULTIPLY(a[], b[], m, n):
    result = new array[m+n] initialized to 0

    for i = 0 to m-1:        // each trit of multiplier
        for j = 0 to n-1:    // each trit of multiplicand
            // Single-trit multiply: no carry possible
            product = a[i] * b[j]

            // Add to appropriate position (may need carry propagation)
            result = ADD_AT_POSITION(result, product, i+j)

    return result
----

=== Optimized: Shift-Add Approach

Since multiplying by 3 is just a left shift:

[cols="2,3,4",options="header"]
|===
| Multiplication | As Shifts | Formula

| √ó 2
| a + a
| x + x

| √ó 3
| shift left 1
| x << 1

| √ó 4
| (x << 1) + x
| 3x + x

| √ó 9
| shift left 2
| x << 2

| √ó 10
| (x << 2) + x
| 9x + x

| √ó 27
| shift left 3
| x << 3
|===

=== Example: 5 √ó 3 = 15

[source]
----
5 in balanced ternary: 1 T T

Multiply by 3 = shift left:

1 T T 0  (add trailing 0)

= 1√ó27 - 1√ó9 - 1√ó3 + 0√ó1
= 27 - 9 - 3
= 15 ‚úì
----

=== Example: 5 √ó 7 = 35

[source]
----
5: 1 T T
7: 1 T 1

      1 T T        (5)
    √ó 1 T 1        (7)
    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      1 T T        (5 √ó 1)
    T 1 1          (5 √ó T, shifted) = -5
  1 T T            (5 √ó 1, shifted twice) = 45
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  1 1 0 T          (35: 1√ó27 + 1√ó9 + 0√ó3 - 1√ó1 = 27+9-1 = 35) ‚úì
----

<<_top,‚Üë Back to Top>>

'''

[[division]]
== Division

=== Balanced Ternary Division

[IMPORTANT]
====
*Division keeps remainders centered around zero.* Instead of keeping remainder in [0, divisor), balanced ternary keeps |remainder| ‚â§ divisor/2.
====

=== Division Algorithm

[source,pseudocode]
----
function DIVIDE(dividend[], divisor[], n):
    quotient = new array[n]
    remainder = 0

    for i = n-1 down to 0:    // most to least significant
        // Shift remainder and add next trit
        remainder = remainder * 3 + dividend[i]

        // Determine quotient trit (keep remainder centered)
        if remainder > divisor / 2:
            quotient[i] = 1
            remainder = remainder - divisor
        else if remainder < -divisor / 2:
            quotient[i] = T
            remainder = remainder + divisor
        else:
            quotient[i] = 0

    return (quotient, remainder)
----

=== Key Insight: Centered Remainder

[cols="2,4,4",options="header"]
|===
| System | Remainder Range | Example: -7 √∑ 3

| *Binary (unsigned)*
| 0 ‚â§ r < divisor
| q = -3, r = 2

| *Balanced Ternary*
| \|r\| ‚â§ divisor/2
| q = -2, r = -1
|===

The balanced ternary quotient (-2) times divisor (3) plus remainder (-1) = -6 - 1 = -7 ‚úì

=== Division by Powers of 3

Division by 3^n is a right shift:

[source,pseudocode]
----
function DIVIDE_BY_POWER_OF_3(x[], n, power):
    quotient = x shifted right by 'power' positions
    remainder = rightmost 'power' trits of x
    return (quotient, remainder)
----

=== Example: 35 √∑ 5 = 7

[source]
----
35: 1 1 0 T
5:  1 T T

Step 1: Process trit 1 (position 3)
  remainder = 0*3 + 1 = 1
  1 < 5/2, so quotient[3] = 0, remainder stays 1

Step 2: Process trit 1 (position 2)
  remainder = 1*3 + 1 = 4
  4 > 5/2, so quotient[2] = 1, remainder = 4 - 5 = -1

Step 3: Process trit 0 (position 1)
  remainder = -1*3 + 0 = -3
  |-3| > 5/2, so quotient[1] = T, remainder = -3 + 5 = 2

Step 4: Process trit T (position 0)
  remainder = 2*3 + (-1) = 5
  5 > 5/2, so quotient[0] = 1, remainder = 5 - 5 = 0

Quotient: 0 1 T 1 = 1 T 1 (leading 0 dropped)
        = 1√ó9 - 1√ó3 + 1√ó1 = 7 ‚úì
----

<<_top,‚Üë Back to Top>>

'''

[[derived-constants]]
== Derived Constants

These constants extend `word/core/ternary-math.toml` with arithmetic algorithm data.

=== Addition Tables (for implementation)

[source,toml]
----
[arithmetic.half_adder]
# Input: (a, b) where a,b ‚àà {-1, 0, 1}
# Output: (carry, sum)
# Indexed as [a+1][b+1] to convert -1,0,1 to 0,1,2
sum = [
    [ 1, -1,  0],   # a=-1: (-1)+(-1)=1(c:-1), (-1)+0=-1, (-1)+1=0
    [-1,  0,  1],   # a=0:  0+(-1)=-1, 0+0=0, 0+1=1
    [ 0,  1, -1]    # a=1:  1+(-1)=0, 1+0=1, 1+1=-1(c:1)
]
carry = [
    [-1,  0,  0],   # a=-1
    [ 0,  0,  0],   # a=0
    [ 0,  0,  1]    # a=1
]
----

=== Multiplication Table (for implementation)

[source,toml]
----
[arithmetic.multiplication]
# Input: (a, b) where a,b ‚àà {-1, 0, 1}
# Output: product (always single trit, no carry)
# Indexed as [a+1][b+1]
product = [
    [ 1,  0, -1],   # a=-1: (-1)√ó(-1)=1, (-1)√ó0=0, (-1)√ó1=-1
    [ 0,  0,  0],   # a=0:  0√óanything=0
    [-1,  0,  1]    # a=1:  1√ó(-1)=-1, 1√ó0=0, 1√ó1=1
]
----

=== Operational Constants

[cols="3,4,4",options="header"]
|===
| Constant | Value | Purpose

| *carries_per_9_additions*
| 2
| Only T+T and 1+1 generate carries

| *max_carry_chain*
| n (number of trits)
| Worst case carry propagation

| *mult_table_size*
| 9
| 3√ó3 entries, all single-trit results

| *shift_multiply_3*
| left shift 1
| √ó 3 = shift left by 1 position
|===

<<_top,‚Üë Back to Top>>

'''

[[algorithm-complexity]]
== Algorithm Complexity

[cols="2,3,3,3",options="header"]
|===
| Operation | Time | Space | Notes

| *Addition (n trits)*
| O(n)
| O(n)
| Carry propagation is linear

| *Subtraction*
| O(n)
| O(n)
| Negation O(n) + Addition O(n)

| *Multiplication*
| O(n¬≤)
| O(n)
| Standard long multiplication

| *Division*
| O(n¬≤)
| O(n)
| Long division approach

| *Shift (√ó 3^k)*
| O(1)
| O(1)
| Just move position marker
|===

<<_top,‚Üë Back to Top>>

'''

////
===============================================================================
FOOTER BLOCK
===============================================================================
////

[[biblical-foundation-footer]]
== Biblical Foundation

[NOTE]
====
*Why Genesis 1:4?* God's first creative act with numbers is *division* ‚Äî dividing light from darkness. Arithmetic is the formalization of divine operations: joining (addition), separating (subtraction/division), and multiplying.
====

_"And God saw the light, that it was good: and God divided the light from the darkness."_ ‚Äî *Genesis 1:4 KJV*

_"God saw the light, and saw that it was good. God divided the light from the darkness."_ ‚Äî *Genesis 1:4 WEB*

*Applied:* Every arithmetic operation reflects the creation pattern. Addition joins. Subtraction and division separate. Multiplication increases. The KJV's archaic sentence structure and the WEB's modern clarity both describe the same divine action: evaluation ("saw that it was good") followed by operation ("divided"). These are not arbitrary human constructs ‚Äî they mirror how God structured reality. Balanced ternary, with its natural center and symmetry, is particularly aligned with creation's pattern of "division in the midst."

*Additional grounding:*

* *Genesis 1:6-7* ‚Äî "Let there be a firmament... and let it divide" ‚Äî Division as fundamental operation
* *Genesis 1:22* ‚Äî "Be fruitful, and multiply" ‚Äî Multiplication as blessing

<<_top,‚Üë Back to Top>>

'''

[[references]]
== References

=== Related Documents

[cols="^1,3,4",options="header"]
|===
| | Document | Purpose

| üìÑ
| *link:ternary-mathematical-foundations.adoc[Ternary Mathematical Foundations]*
| Why ternary is optimal (Paper 1)

| üìÑ
| *link:trit-foundations.adoc[Trit Foundations]*
| What a trit is, biblical patterns

| üìê
| *link:../constants/ternary-math.toml[Ternary Math Constants]*
| Base constants these algorithms use
|===

=== External Resources

[cols="2,5",options="header"]
|===
| Resource | Purpose

| *https://homepage.divms.uiowa.edu/~jones/ternary/arith.shtml[Douglas W. Jones: Ternary Arithmetic]*
| Comprehensive arithmetic tables and logic

| *https://homepage.divms.uiowa.edu/~jones/ternary/multiply.shtml[Douglas W. Jones: Fast Multiplication]*
| Optimized multiplication and division

| *https://rosettacode.org/wiki/Balanced_ternary[Rosetta Code: Balanced Ternary]*
| Implementation examples in multiple languages

| *https://cp-algorithms.com/algebra/balanced-ternary.html[CP-Algorithms: Balanced Ternary]*
| Competitive programming approach
|===

'''

[[see-also]]
== See Also

* link:ternary-mathematical-foundations.adoc[Ternary Mathematical Foundations] ‚Äî Why ternary is optimal (Paper 1)
* link:ternary-logic-algorithms.adoc[Ternary Logic Algorithms] ‚Äî Three-valued logic operations (Paper 3)
* link:ternary-conversion-algorithms.adoc[Ternary Conversion Algorithms] ‚Äî Base conversion procedures (Paper 4)
* link:ternary-storage-algorithms.adoc[Ternary Storage Algorithms] ‚Äî Packing and unpacking (Paper 5)

'''

[.text-center]
--
*<<_top,‚Üë Back to Top>>*

'''

*Key:* {key} ‚Ä¢ *Type:* {type} ‚Ä¢ *Version:* {version}

*Status:* {status} ‚Ä¢ *Updated:* {updated}

'''

_"And God divided the light from the darkness..."_ ‚Äî *Genesis 1:4*

*The fundamental operations ‚Äî join, separate, multiply ‚Äî reflecting creation itself.*
--

////
===============================================================================
END FOOTER
===============================================================================
////
